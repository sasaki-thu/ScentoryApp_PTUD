    <!-- màn hình tìm kiếm -->
<div class="search-popup">
    <div class="search-popup-container">

        <form role="search" method="get" class="form-group" action="">
            <input type="search" id="search-form" class="form-control border-0 border-bottom"
                   placeholder="Tìm kiếm sản phẩm..." value="" name="s" />

            <div id="search-results" class="search-results"></div>

            <button type="submit" class="search-submit border-0 position-absolute bg-white"
                    style="top: 15px;right: 15px;">
                <svg class="search" width="24" height="24">
                    <use xlink:href="#search"></use>
                </svg>
            </button>
        </form>

        <h5 class="cat-list-title">Xem các danh mục</h5>

        <ul class="cat-list">
            <li class="cat-list-item">
                <a href="/Home/Perfumes#" title="Nước hoa">Nước hoa</a>
            </li>
            <li class="cat-list-item">
                <a href="/Home/Oils#" title="Tinh dầu">Tinh dầu</a>
            </li>
            <li class="cat-list-item">
                <a href="#" title="Box quà">Box quà</a>
            </li>
            <li class="cat-list-item">
                <a href="#" title="Hàng mới về">Hàng mới về</a>
            </li>
            <li class="cat-list-item">
                <a href="#" title="Nước hoa 10ml">Nước hoa 10ml</a>
            </li>
            <li class="cat-list-item">
                <a href="#" title="Nước hoa 50ml">Nước hoa 50ml</a>
            </li>
        </ul>

    </div>
</div>
<style>
    .search-results {
        background: #fff;
        border: 1px solid #ddd;
        max-height: 250px;
        overflow-y: auto;
        display: none;
        position: relative;
        margin-top: 5px;
        border-radius: 6px;
        z-index: 9999;
    }

    .search-results div {
        padding: 10px 15px;
        cursor: pointer;
     }

     .search-results div:hover {
     background: #f1f1f1;
     }
</style>
<script>
    // Danh sách sản phẩm mẫu 
    const products = [
        { 
            name: "Nước hoa Reminiscence – Whisper (Thầm) 50ml",
            url: "/Home/Perfumes?sp=whisper10",
            price: 179000,
        },
        { 
            name: "Nước hoa Reminiscence – Horizon (Miên) 50ml", 
            url: "/Home/Perfumes?sp=horizon10" },
        { name: "Nước hoa Eclipse 10ml", url: "/Home/Perfumes?sp=eclipse10" },
        { name: "Box quà nước hoa Eclipse", url: "/Home/GiftBox?sp=eclipsebox" }
    ];

    const searchInput = document.getElementById("search-form");
    const searchResults = document.getElementById("search-results");

    searchInput.addEventListener("keyup", function () {
        let keyword = this.value.toLowerCase();
        searchResults.innerHTML = "";

        if (keyword.length === 0) {
            searchResults.style.display = "none";
            return;
        }

        const filtered = products.filter(p =>
            p.name.toLowerCase().includes(keyword)
        );

        if (filtered.length === 0) {
            searchResults.style.display = "none";
            return;
        }

        filtered.forEach(p => {
            const item = document.createElement("div");
            item.innerText = p.name;
            item.onclick = () => window.location.href = p.url;
            searchResults.appendChild(item);
        });

        searchResults.style.display = "block";
    });
</script>

<!-- kết thúc màn hình tìm kiếm -->
<!-- menu được chia làm 3 thẻ div: logo, menu chính và icon-->
<nav class="navbar navbar-expand-lg bg-light text-uppercase fs-6 p-3 border-bottom align-items-center">
    <div class="container-fluid">
        <div class="row justify-content-between align-items-center w-100">
            <!-- logo -->
            <div class="col-auto">
                <a class="navbar-brand text-white" asp-controller="Home" asp-action="Index">
                    <img src="~/adminassets/images/scentorylogoopen.png" alt="Scentory Logo" style="max-height: 60px;margin-top: -10px;" />

                </a>
            </div>
            <!-- kết thúc logo -->
            <!-- menu chính -->
            <div class="col-auto">
                <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasNavbar"
                        aria-controls="offcanvasNavbar">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasNavbar"
                     aria-labelledby="offcanvasNavbarLabel">
                    <div class="offcanvas-header">
                        <h5 class="offcanvas-title" id="offcanvasNavbarLabel">Menu</h5>
                        <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas"
                                aria-label="Close"></button>
                    </div>

                    <div class="offcanvas-body">
                        <ul class="navbar-nav justify-content-end flex-grow-1 gap-1 gap-md-5 pe-3">
                            <!-- 1. Trang chủ -->
                            <li class="nav-item active">
                                <a class="nav-link" asp-controller="Home" asp-action="Index">Trang chủ</a>
                            </li>

                            <!-- 2. Về chúng tôi-->
                            <li class="nav-item">
                                <a class="nav-link" asp-controller="Home" asp-action="About">Về chúng tôi</a>
                            </li>

                            <!-- 3. Cửa hàng (gồm Nước hoa và tinh dầu-->
                            <li class="nav-item dropdown d-flex">
                                <!-- Nút 1: Link chính (đi đến trang Shop) -->
                                <a class="nav-link" asp-controller="Home" asp-action="Shop">Cửa hàng</a>

                                <!-- Nút 2: Mũi tên (mở dropdown) -->
                                <a class="nav-link dropdown-toggle dropdown-toggle-split"
                                   href="#"
                                   id="dropdownShop"
                                   data-bs-toggle="dropdown"
                                   aria-haspopup="true" aria-expanded="false">
                                    <span class="visually-hidden">Toggle Dropdown</span>
                                </a>

                                <!-- Menu con -->
                                <ul class="dropdown-menu list-unstyled" aria-labelledby="dropdownShop">
                                    <li>
                                        <a class="dropdown-item item-anchor" asp-controller="Home" asp-action="Perfumes">Nước hoa</a>
                                    </li>
                                    <li>
                                        <a class="dropdown-item item-anchor" asp-controller="Home" asp-action="Oils">Tinh dầu</a>
                                    </li>
                                </ul>
                            </li>

                            <!-- 4. Blog -->
                            <li class="nav-item">
                                <a class="nav-link" asp-controller="Home" asp-action="Blog">Blog</a>
                            </li>


                            <!-- 5. Liên hệ -->
                            <li class="nav-item">
                                <a class="nav-link" asp-controller="Home" asp-action="Contact">Liên hệ</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <!-- kết thúc menu chính -->
            <!-- wishlist & cart-->
            <div class="col-3 col-lg-auto">
                <ul class="list-unstyled d-flex m-0">

                    <!-- 1. Cart (Icon) -->
                    <li class="cart-container position-relative">
                        <a href="/Cart" id="cart-icon" class="mx-2">
                            <svg width="24" height="24" viewBox="0 0 24 24"><use xlink:href="#cart"></use></svg>
                            <span class="cart-count">(0)</span>
                        </a>

                        <!-- MINI CART DROPDOWN -->
                        <div id="mini-cart" class="mini-cart shadow">
                            <ul id="cart-list" class="list-unstyled m-0 p-0"></ul>

                            <div class="p-3 border-top">
                                <div class="d-flex justify-content-between mb-2">
                                    <span class="fw-bold">Tổng số phụ:</span>
                                    <span id="cart-total" class="fw-bold">0 đ</span>
                                </div>

                                <a href="/Cart" class="btn w-100 mb-2 btn-outline-secondary">XEM GIỎ HÀNG</a>
                                <a href="/Checkout" class="btn w-100 btn-primary">THANH TOÁN</a>
                            </div>
                        </div>
                    </li>

                    <!-- 2. TÀI KHOẢN (Icon) -->
                    <li class="dropdown">
                        <a href="#" class="mx-2 dropdown-toggle no-arrow" data-bs-toggle="dropdown" aria-expanded="false">
                            <svg width="24" height="24" viewBox="0 0 24 24">
                                <use xlink:href="#user"></use>
                            </svg>
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                            <li><a class="dropdown-item" asp-controller="Home" asp-action="Account">Tài khoản</a></li>
                            <li><a class="dropdown-item" href="#" id="logout-link">Đăng xuất</a></li>
                        </ul>
                    </li>

                    <!-- 3. Search (Icon) -->
                    <li class="mx-2 search-box">
                        <a href="#search" class="search-button">
                            <svg width="24" height="24" viewBox="0 0 24 24">
                                <use xlink:href="#search"></use>
                            </svg>
                        </a>
                    </li>
                </ul>
            </div>
            <!-- kết thúc wishlist & cart-->
        </div>

    </div>
</nav>
<!-- kế thúc menu-->
<!-- SCRIPT XỬ LÝ GIỎ HÀNG -->
<script>
       let cartItems = [
        {
            id: 1,
            name: "Nước hoa Reminiscence - Eclipse (Huyền) 10ml | Scentory",
            price: 159000,
            img: "assets/images/Eclipse 10ml.png"
        },
        {
            id: 2,
            name: "Nước hoa Reminiscence - Horizon (Miên) 10ml | Scentory",
            price: 159000,
            img: "assets/images/Horizon 10ml.png"
        },
        {
            id: 3,
            name: "Nước hoa Reminiscence - Whisper (Thầm) 10ml | Scentory",
            price: 159000,
            img: "assets/images/Whisper 10ml.png"
        }
    ];

    function formatVN(num) {
        return num.toLocaleString("vi-VN") + " đ";
    }

    function renderCart() {
        const cartList = document.getElementById("cart-list");
        const cartTotal = document.getElementById("cart-total");
        const cartCount = document.querySelector(".cart-count");

        cartList.innerHTML = "";
        let total = 0;

        cartItems.forEach(item => {
            total += item.price;

            cartList.innerHTML += `
                <li class="d-flex justify-content-between align-items-start">
                    <div class="d-flex gap-3">
                        <img src="${item.img}" style="width:50px;height:50px;object-fit:cover;">
                        <div>
                            <div class="fw-bold">${item.name}</div>
                            <small>1 × ${formatVN(item.price)}</small>
                        </div>
                    </div>

                    <span class="remove-btn" data-id="${item.id}">&times;</span>
                </li>
            `;
        });

        cartTotal.textContent = formatVN(total);
        cartCount.textContent = `(${cartItems.length})`;

        attachRemoveEvents();
    }

    function attachRemoveEvents() {
        document.querySelectorAll(".remove-btn").forEach(btn => {
            btn.addEventListener("click", function () {
                const id = parseInt(this.getAttribute("data-id"));
                cartItems = cartItems.filter(x => x.id !== id);
                renderCart();
            });
        });
    }

    document.addEventListener("DOMContentLoaded", renderCart);
</script>
<style>
    .mini-cart {
        position: absolute;
        top: 28px;
        right: 0;
        width: 320px;
        background: #fff;
        border-radius: 8px;
        display: none;
        z-index: 99999;
    }

    .cart-container:hover .mini-cart {
        display: block;
    }

    .mini-cart ul li {
        padding: 12px;
        border-bottom: 1px solid #eee;
    }

    .remove-btn {
        cursor: pointer;
        font-size: 20px;
        color: #999;
    }

        .remove-btn:hover {
            color: #333;
        }
</style>

<style>
    .no-arrow::after {
        display: none !important;
    }
</style>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        var logoutLink = document.getElementById('logout-link');
        var logoutModal = new bootstrap.Modal(document.getElementById('logoutModal'), {
            keyboard: false
        });
        var confirmLogoutButton = document.getElementById('confirm-logout-button');

        if (logoutLink) {
            logoutLink.addEventListener('click', function (e) {
                e.preventDefault();
                logoutModal.show();
            });
        }

        if (confirmLogoutButton) {
            confirmLogoutButton.addEventListener('click', function (e) {
                window.location.href = '/Home/Logout';
            });
        }
    });
</script>

<!-- Logout Confirmation Modal -->
<div class="modal fade" id="logoutModal" tabindex="-1" aria-labelledby="logoutModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="logoutModalLabel">Xác nhận đăng xuất</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                Bạn có chắc chắn muốn đăng xuất?
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Hủy</button>
                <button type="button" class="btn btn-primary" id="confirm-logout-button">Đăng xuất</button>
            </div>
        </div>
    </div>
</div>